:toc:               left
:toc-title:         MAC WebCrawler Module
:toclevels:         2
:last-update-label!:
:docinfo:
:source-highlighter: coderay
:icons: font


= MAC WebCrawler Module Documentation Reference

+++
This is the main class of an extension, is the entry point from which configurations, connection providers, operations and sources are going to be declared.
+++


== Configurations
---
[[config]]
=== Config

+++
Default configuration
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
|Name | String | The name for this configuration. Connectors reference the configuration with this name. | | *x*{nbsp}
| Tag List a| Array of String |  |  | {nbsp}
| Expiration Policy a| <<ExpirationPolicy>> |  +++Configures the minimum amount of time that a dynamic configuration instance can remain idle before the runtime considers it eligible for expiration. This does not mean that the platform will expire the instance at the exact moment that it becomes eligible. The runtime will actually purge the instances when it sees it fit.+++ |  | {nbsp}
|======================


==== Associated Operations
* <<Crawl-website>> {nbsp}
* <<Get-page-content>> {nbsp}
* <<Get-page-insights>> {nbsp}



== Operations

[[Crawl-website]]
=== Crawl Website
`<mac-web-crawler:crawl-website>`

+++
Crawl a website at a specified depth and fetch contents. Specify tags and classes in the configuration to fetch contents from those elements only.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Website URL a| String |  |  | *x*{nbsp}
| Restrict Crawl under URL a| Boolean |  |  +++false+++ | {nbsp}
| Maximum Depth a| Number |  |  | *x*{nbsp}
| Delay (millisecs) a| Number |  |  | *x*{nbsp}
| Retrieve Meta Tags a| Boolean |  |  +++false+++ | {nbsp}
| Download Images a| Boolean |  |  +++false+++ | {nbsp}
| Download Location a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================

==== For Configurations.
* <<config>> {nbsp}



[[Get-page-content]]
=== Get Page Content
`<mac-web-crawler:get-page-content>`

+++
Get contents of a web page. Content is returned in the resulting payload.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Page Url a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================

==== For Configurations.
* <<config>> {nbsp}



[[Get-page-insights]]
=== Get Page Insights
`<mac-web-crawler:get-page-insights>`

+++
Get insights from a web page including links, word count, number of occurrences of elements. Restrict insights to specific elements in the configuration.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Configuration | String | The name of the configuration to use. | | *x*{nbsp}
| Page Url a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================

==== For Configurations.
* <<config>> {nbsp}



[[Download-image]]
=== Download Image
`<mac-web-crawler:download-image>`

+++
Download all images from a web page, or download a single image at the specified link.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Page Or Image URL a| String |  |  | *x*{nbsp}
| Download Location a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[Generate-sitemap]]
=== Generate Sitemap
`<mac-web-crawler:generate-sitemap>`

+++
Retrieve internal links as a site map from the specified url and depth.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Website URL a| String |  |  | *x*{nbsp}
| Maximum Depth a| Number |  |  | *x*{nbsp}
| Delay (millisecs) a| Number |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[Get-page-meta-tags]]
=== Get Page Meta Tags
`<mac-web-crawler:get-page-meta-tags>`

+++
Fetch the meta tags from a web page.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Page URL a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================




[[Google-search]]
=== Google Search
`<mac-web-crawler:google-search>`

+++
Perform a Google search using the SERP API.
+++

==== Parameters
[cols=".^20%,.^20%,.^35%,.^20%,^.^5%", options="header"]
|======================
| Name | Type | Description | Default Value | Required
| Search Query a| String |  |  | *x*{nbsp}
| API Key a| String |  |  | *x*{nbsp}
| Output Mime Type a| String |  +++The mime type of the payload that this operation outputs.+++ |  | {nbsp}
| Target Variable a| String |  +++The name of a variable on which the operation's output will be placed+++ |  | {nbsp}
| Target Value a| String |  +++An expression that will be evaluated against the operation's output and the outcome of that expression will be stored in the target variable+++ |  +++#[payload]+++ | {nbsp}
|======================

==== Output
[cols=".^50%,.^50%"]
|======================
| *Type* a| String
|======================





== Types
[[ExpirationPolicy]]
=== Expiration Policy

[cols=".^20%,.^25%,.^30%,.^15%,.^10%", options="header"]
|======================
| Field | Type | Description | Default Value | Required
| Max Idle Time a| Number | A scalar time value for the maximum amount of time a dynamic configuration instance should be allowed to be idle before it's considered eligible for expiration |  | 
| Time Unit a| Enumeration, one of:

** NANOSECONDS
** MICROSECONDS
** MILLISECONDS
** SECONDS
** MINUTES
** HOURS
** DAYS | A time unit that qualifies the maxIdleTime attribute |  | 
|======================

